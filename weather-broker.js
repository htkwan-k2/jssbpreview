!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=function(t){return t&&t.Math==Math&&t},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")(),o=function(t){try{return!!t()}catch(t){return!0}},i=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,a={f:u&&!c.call({1:2},1)?function(t){var e=u(this,t);return!!e&&e.enumerable}:c},f=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},s={}.toString,l=function(t){return s.call(t).slice(8,-1)},p="".split,h=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==l(t)?p.call(t,""):Object(t)}:Object,d=function(t){return h(function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}(t))},v=function(t){return"object"==typeof t?null!==t:"function"==typeof t},y=function(t,e){if(!v(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!v(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!v(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!v(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},m={}.hasOwnProperty,g=function(t,e){return m.call(t,e)},b=r.document,w=v(b)&&v(b.createElement),j=function(t){return w?b.createElement(t):{}},S=!i&&!o((function(){return 7!=Object.defineProperty(j("div"),"a",{get:function(){return 7}}).a})),O=Object.getOwnPropertyDescriptor,E={f:i?O:function(t,e){if(t=d(t),e=y(e,!0),S)try{return O(t,e)}catch(t){}if(g(t,e))return f(!a.f.call(t,e),t[e])}},T=function(t){if(!v(t))throw TypeError(String(t)+" is not an object");return t},P=Object.defineProperty,x={f:i?P:function(t,e,n){if(T(t),e=y(e,!0),T(n),S)try{return P(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},k=i?function(t,e,n){return x.f(t,e,f(1,n))}:function(t,e,n){return t[e]=n,t},M=function(t,e){try{k(r,t,e)}catch(n){r[t]=e}return e},N=r["__core-js_shared__"]||M("__core-js_shared__",{}),W=Function.toString;"function"!=typeof N.inspectSource&&(N.inspectSource=function(t){return W.call(t)});var L,_,A,C,I=N.inspectSource,D=r.WeakMap,F="function"==typeof D&&/native code/.test(I(D)),K=e((function(t){(t.exports=function(t,e){return N[t]||(N[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),G=0,z=Math.random(),R=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++G+z).toString(36)},q=K("keys"),H={},U=r.WeakMap;if(F){var B=new U,$=B.get,J=B.has,V=B.set;L=function(t,e){return V.call(B,t,e),e},_=function(t){return $.call(B,t)||{}},A=function(t){return J.call(B,t)}}else{var X=q[C="state"]||(q[C]=R(C));H[X]=!0,L=function(t,e){return k(t,X,e),e},_=function(t){return g(t,X)?t[X]:{}},A=function(t){return g(t,X)}}var Y={set:L,get:_,has:A,enforce:function(t){return A(t)?_(t):L(t,{})},getterFor:function(t){return function(e){var n;if(!v(e)||(n=_(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Q=e((function(t){var e=Y.get,n=Y.enforce,o=String(String).split("String");(t.exports=function(t,e,i,c){var u=!!c&&!!c.unsafe,a=!!c&&!!c.enumerable,f=!!c&&!!c.noTargetGet;"function"==typeof i&&("string"!=typeof e||g(i,"name")||k(i,"name",e),n(i).source=o.join("string"==typeof e?e:"")),t!==r?(u?!f&&t[e]&&(a=!0):delete t[e],a?t[e]=i:k(t,e,i)):a?t[e]=i:M(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||I(this)}))})),Z=r,tt=function(t){return"function"==typeof t?t:void 0},et=function(t,e){return arguments.length<2?tt(Z[t])||tt(r[t]):Z[t]&&Z[t][e]||r[t]&&r[t][e]},nt=Math.ceil,rt=Math.floor,ot=function(t){return isNaN(t=+t)?0:(t>0?rt:nt)(t)},it=Math.min,ct=function(t){return t>0?it(ot(t),9007199254740991):0},ut=Math.max,at=Math.min,ft=function(t){return function(e,n,r){var o,i=d(e),c=ct(i.length),u=function(t,e){var n=ot(t);return n<0?ut(n+e,0):at(n,e)}(r,c);if(t&&n!=n){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},st={includes:ft(!0),indexOf:ft(!1)}.indexOf,lt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),pt={f:Object.getOwnPropertyNames||function(t){return function(t,e){var n,r=d(t),o=0,i=[];for(n in r)!g(H,n)&&g(r,n)&&i.push(n);for(;e.length>o;)g(r,n=e[o++])&&(~st(i,n)||i.push(n));return i}(t,lt)}},ht={f:Object.getOwnPropertySymbols},dt=et("Reflect","ownKeys")||function(t){var e=pt.f(T(t)),n=ht.f;return n?e.concat(n(t)):e},vt=function(t,e){for(var n=dt(e),r=x.f,o=E.f,i=0;i<n.length;i++){var c=n[i];g(t,c)||r(t,c,o(e,c))}},yt=/#|\.prototype\./,mt=function(t,e){var n=bt[gt(t)];return n==jt||n!=wt&&("function"==typeof e?o(e):!!e)},gt=mt.normalize=function(t){return String(t).replace(yt,".").toLowerCase()},bt=mt.data={},wt=mt.NATIVE="N",jt=mt.POLYFILL="P",St=mt,Ot=E.f,Et=function(t,e){var n,o,i,c,u,a=t.target,f=t.global,s=t.stat;if(n=f?r:s?r[a]||M(a,{}):(r[a]||{}).prototype)for(o in e){if(c=e[o],i=t.noTargetGet?(u=Ot(n,o))&&u.value:n[o],!St(f?o:a+(s?".":"#")+o,t.forced)&&void 0!==i){if(typeof c==typeof i)continue;vt(c,i)}(t.sham||i&&i.sham)&&k(c,"sham",!0),Q(n,o,c,t)}},Tt=x.f,Pt=r.Symbol;if(i&&"function"==typeof Pt&&(!("description"in Pt.prototype)||void 0!==Pt().description)){var xt={},kt=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof kt?new Pt(t):void 0===t?Pt():Pt(t);return""===t&&(xt[e]=!0),e};vt(kt,Pt);var Mt=kt.prototype=Pt.prototype;Mt.constructor=kt;var Nt=Mt.toString,Wt="Symbol(test)"==String(Pt("test")),Lt=/^Symbol\((.*)\)[^)]+$/;Tt(Mt,"description",{configurable:!0,get:function(){var t=v(this)?this.valueOf():this,e=Nt.call(t);if(g(xt,t))return"";var n=Wt?e.slice(7,-1):e.replace(Lt,"$1");return""===n?void 0:n}}),Et({global:!0,forced:!0},{Symbol:kt})}var _t=r.Promise,At=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),Ct=At&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,It=K("wks"),Dt=r.Symbol,Ft=Ct?Dt:Dt&&Dt.withoutSetter||R,Kt=function(t){return g(It,t)||(At&&g(Dt,t)?It[t]=Dt[t]:It[t]=Ft("Symbol."+t)),It[t]},Gt=x.f,zt=Kt("toStringTag"),Rt=Kt("species"),qt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Ht={},Ut=Kt("iterator"),Bt=Array.prototype,$t=function(t,e,n){if(qt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Jt={};Jt[Kt("toStringTag")]="z";var Vt="[object z]"===String(Jt),Xt=Kt("toStringTag"),Yt="Arguments"==l(function(){return arguments}()),Qt=Vt?l:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Xt))?n:Yt?l(e):"Object"==(r=l(e))&&"function"==typeof e.callee?"Arguments":r},Zt=Kt("iterator"),te=function(t,e,n,r){try{return r?e(T(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&T(o.call(t)),e}},ee=e((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,o,i){var c,u,a,f,s,l,p,h,d=$t(n,r,o?2:1);if(i)c=t;else{if("function"!=typeof(u=function(t){if(null!=t)return t[Zt]||t["@@iterator"]||Ht[Qt(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(h=u)&&(Ht.Array===h||Bt[Ut]===h)){for(a=0,f=ct(t.length);f>a;a++)if((s=o?d(T(p=t[a])[0],p[1]):d(t[a]))&&s instanceof e)return s;return new e(!1)}c=u.call(t)}for(l=c.next;!(p=l.call(c)).done;)if("object"==typeof(s=te(c,d,p.value,o))&&s&&s instanceof e)return s;return new e(!1)}).stop=function(t){return new e(!0,t)}})),ne=Kt("iterator"),re=!1;try{var oe=0,ie={next:function(){return{done:!!oe++}},return:function(){re=!0}};ie[ne]=function(){return this},Array.from(ie,(function(){throw 2}))}catch(t){}var ce,ue,ae,fe=Kt("species"),se=et("document","documentElement"),le=et("navigator","userAgent")||"",pe=/(iphone|ipod|ipad).*applewebkit/i.test(le),he=r.location,de=r.setImmediate,ve=r.clearImmediate,ye=r.process,me=r.MessageChannel,ge=r.Dispatch,be=0,we={},je=function(t){if(we.hasOwnProperty(t)){var e=we[t];delete we[t],e()}},Se=function(t){return function(){je(t)}},Oe=function(t){je(t.data)},Ee=function(t){r.postMessage(t+"",he.protocol+"//"+he.host)};de&&ve||(de=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return we[++be]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},ce(be),be},ve=function(t){delete we[t]},"process"==l(ye)?ce=function(t){ye.nextTick(Se(t))}:ge&&ge.now?ce=function(t){ge.now(Se(t))}:me&&!pe?(ae=(ue=new me).port2,ue.port1.onmessage=Oe,ce=$t(ae.postMessage,ae,1)):!r.addEventListener||"function"!=typeof postMessage||r.importScripts||o(Ee)?ce="onreadystatechange"in j("script")?function(t){se.appendChild(j("script")).onreadystatechange=function(){se.removeChild(this),je(t)}}:function(t){setTimeout(Se(t),0)}:(ce=Ee,r.addEventListener("message",Oe,!1)));var Te,Pe,xe,ke,Me,Ne,We,Le,_e={set:de,clear:ve},Ae=E.f,Ce=_e.set,Ie=r.MutationObserver||r.WebKitMutationObserver,De=r.process,Fe=r.Promise,Ke="process"==l(De),Ge=Ae(r,"queueMicrotask"),ze=Ge&&Ge.value;ze||(Te=function(){var t,e;for(Ke&&(t=De.domain)&&t.exit();Pe;){e=Pe.fn,Pe=Pe.next;try{e()}catch(t){throw Pe?ke():xe=void 0,t}}xe=void 0,t&&t.enter()},Ke?ke=function(){De.nextTick(Te)}:Ie&&!pe?(Me=!0,Ne=document.createTextNode(""),new Ie(Te).observe(Ne,{characterData:!0}),ke=function(){Ne.data=Me=!Me}):Fe&&Fe.resolve?(We=Fe.resolve(void 0),Le=We.then,ke=function(){Le.call(We,Te)}):ke=function(){Ce.call(r,Te)});var Re,qe,He=ze||function(t){var e={fn:t,next:void 0};xe&&(xe.next=e),Pe||(Pe=e,ke()),xe=e},Ue=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=qt(e),this.reject=qt(n)},Be={f:function(t){return new Ue(t)}},$e=function(t,e){if(T(t),v(e)&&e.constructor===t)return e;var n=Be.f(t);return(0,n.resolve)(e),n.promise},Je=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Ve=r.process,Xe=Ve&&Ve.versions,Ye=Xe&&Xe.v8;Ye?qe=(Re=Ye.split("."))[0]+Re[1]:le&&(!(Re=le.match(/Edge\/(\d+)/))||Re[1]>=74)&&(Re=le.match(/Chrome\/(\d+)/))&&(qe=Re[1]);var Qe,Ze,tn,en,nn,rn,on,cn=qe&&+qe,un=_e.set,an=Kt("species"),fn="Promise",sn=Y.get,ln=Y.set,pn=Y.getterFor(fn),hn=_t,dn=r.TypeError,vn=r.document,yn=r.process,mn=et("fetch"),gn=Be.f,bn=gn,wn="process"==l(yn),jn=!!(vn&&vn.createEvent&&r.dispatchEvent),Sn=St(fn,(function(){if(!(I(hn)!==String(hn))){if(66===cn)return!0;if(!wn&&"function"!=typeof PromiseRejectionEvent)return!0}if(cn>=51&&/native code/.test(hn))return!1;var t=hn.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[an]=e,!(t.then((function(){}))instanceof e)})),On=Sn||!function(t,e){if(!e&&!re)return!1;var n=!1;try{var r={};r[ne]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){hn.all(t).catch((function(){}))})),En=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},Tn=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;He((function(){for(var o=e.value,i=1==e.state,c=0;r.length>c;){var u,a,f,s=r[c++],l=i?s.ok:s.fail,p=s.resolve,h=s.reject,d=s.domain;try{l?(i||(2===e.rejection&&Mn(t,e),e.rejection=1),!0===l?u=o:(d&&d.enter(),u=l(o),d&&(d.exit(),f=!0)),u===s.promise?h(dn("Promise-chain cycle")):(a=En(u))?a.call(u,p,h):p(u)):h(o)}catch(t){d&&!f&&d.exit(),h(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&xn(t,e)}))}},Pn=function(t,e,n){var o,i;jn?((o=vn.createEvent("Event")).promise=e,o.reason=n,o.initEvent(t,!1,!0),r.dispatchEvent(o)):o={promise:e,reason:n},(i=r["on"+t])?i(o):"unhandledrejection"===t&&function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},xn=function(t,e){un.call(r,(function(){var n,r=e.value;if(kn(e)&&(n=Je((function(){wn?yn.emit("unhandledRejection",r,t):Pn("unhandledrejection",t,r)})),e.rejection=wn||kn(e)?2:1,n.error))throw n.value}))},kn=function(t){return 1!==t.rejection&&!t.parent},Mn=function(t,e){un.call(r,(function(){wn?yn.emit("rejectionHandled",t):Pn("rejectionhandled",t,e.value)}))},Nn=function(t,e,n,r){return function(o){t(e,n,o,r)}},Wn=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Tn(t,e,!0))},Ln=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw dn("Promise can't be resolved itself");var o=En(n);o?He((function(){var r={done:!1};try{o.call(n,Nn(Ln,t,r,e),Nn(Wn,t,r,e))}catch(n){Wn(t,r,n,e)}})):(e.value=n,e.state=1,Tn(t,e,!1))}catch(n){Wn(t,{done:!1},n,e)}}};Sn&&(hn=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,hn,fn),qt(t),Qe.call(this);var e=sn(this);try{t(Nn(Ln,this,e),Nn(Wn,this,e))}catch(t){Wn(this,e,t)}},(Qe=function(t){ln(this,{type:fn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)Q(t,r,e[r],n);return t}(hn.prototype,{then:function(t,e){var n,r,o,i=pn(this),c=gn((n=hn,void 0===(o=T(this).constructor)||null==(r=T(o)[fe])?n:qt(r)));return c.ok="function"!=typeof t||t,c.fail="function"==typeof e&&e,c.domain=wn?yn.domain:void 0,i.parent=!0,i.reactions.push(c),0!=i.state&&Tn(this,i,!1),c.promise},catch:function(t){return this.then(void 0,t)}}),Ze=function(){var t=new Qe,e=sn(t);this.promise=t,this.resolve=Nn(Ln,t,e),this.reject=Nn(Wn,t,e)},Be.f=gn=function(t){return t===hn||t===tn?new Ze(t):bn(t)},"function"==typeof _t&&(en=_t.prototype.then,Q(_t.prototype,"then",(function(t,e){var n=this;return new hn((function(t,e){en.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof mn&&Et({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return $e(hn,mn.apply(r,arguments))}}))),Et({global:!0,wrap:!0,forced:Sn},{Promise:hn}),rn=fn,on=!1,(nn=hn)&&!g(nn=on?nn:nn.prototype,zt)&&Gt(nn,zt,{configurable:!0,value:rn}),function(t){var e=et(t),n=x.f;i&&e&&!e[Rt]&&n(e,Rt,{configurable:!0,get:function(){return this}})}(fn),tn=et(fn),Et({target:fn,stat:!0,forced:Sn},{reject:function(t){var e=gn(this);return e.reject.call(void 0,t),e.promise}}),Et({target:fn,stat:!0,forced:Sn},{resolve:function(t){return $e(this,t)}}),Et({target:fn,stat:!0,forced:On},{all:function(t){var e=this,n=gn(e),r=n.resolve,o=n.reject,i=Je((function(){var n=qt(e.resolve),i=[],c=0,u=1;ee(t,(function(t){var a=c++,f=!1;i.push(void 0),u++,n.call(e,t).then((function(t){f||(f=!0,i[a]=t,--u||r(i))}),o)})),--u||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=gn(e),r=n.reject,o=Je((function(){var o=qt(e.resolve);ee(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}}),metadata={systemName:"HTKOpenWeatherAPI",displayName:"OpenWeather Broker",description:"A broker that gets weather information from OpenWeather."},ondescribe=async function(){postSchema({objects:{Weather:{displayName:"Weather",description:"Open Weather API",properties:{city:{displayName:"City",type:"string"},units:{displayName:"Unit",type:"string"},apiKey:{displayName:"Key",type:"string"},weatherDescription:{displayName:"condition",type:"string"},temperature:{displayName:"temperature",type:"decimal"},feelsLike:{displayName:"feelsLike",type:"decimal"}},methods:{GetCurrentWeather:{displayName:"Get Current Weather",type:"read",inputs:["city","units","key"],outputs:["weatherDescription","temperature","feelsLike"]}}}}})},onexecute=async function(t,e,n,r){switch(t){case"Weather":await async function(t,e){switch(t){case"GetCurrentWeather":await function(t){return new Promise((e,n)=>{var r=new XMLHttpRequest;r.onreadystatechange=function(){try{if(4!==r.readyState)return;if(200!==r.status)throw new Error("Failed with status "+r.status);var t=JSON.parse(r.responseText);postResult({weatherDescription:t.weather[0].description,temperature:t.main.temp,feelsLike:t.main.feels_like}),e()}catch(t){n(t)}};var o="http://api.openweathermap.org/data/2.5/weather/"+("?q="+t.city+"&units="+t.units+"&apiKey="+t.apiKey);r.open("GET",o),r.send()})}(e);break;default:throw new Error("The method "+t+" is not supported.")}}(e,r);break;default:throw new Error("The object "+t+" is not supported.")}}}();
//# sourceMappingURL=index.js.map
